# Changelog - November 24, 2025

## Major Changes

### Frontend UI Improvements

**Grid Layout System Fixes**
- Fixed critical z-index problems causing widgets to overlap incorrectly
- Resolved widget functionality issues when using grid layout mode
- Improved widget stacking behavior on mouse interactions
- Updated modal popup z-index from extreme value to reasonable 9999

**Widget Framework Enhancements**
- Enhanced BaseWidget class with proper event listener management
- Added lifecycle management with initialization and destruction tracking
- Improved memory cleanup and prevention of memory leaks
- Fixed widget initialization timing issues

**Downloads Widget Updates**
- Added comprehensive right-click context menu functionality
- Implemented new color scheme with enhanced visual feedback
- Improved download status display and progress tracking
- Fixed styling issues and layout problems
- Enhanced user interaction capabilities

**Statistics & Subscriptions Widgets**
- Refactored widget architecture for better performance
- Fixed functional aspects and styling inconsistencies
- Improved data handling and display logic
- Better integration with grid layout system

### Backend System Improvements

**WebSocket Communication Refactor**
- Completely redesigned WebSocket packet handling system
- Improved real-time communication efficiency between frontend and backend
- Enhanced data synchronization mechanisms
- Reduced overhead in client-server messaging

**Download System Enhancements**
- Added duplicate download detection to prevent redundant tasks
- Improved proxy handling with better logging and validation
- Enhanced error handling and retry mechanism logic
- Added automatic log file compression using GZIP
- Improved download task lifecycle management with proper cleanup

**Dependency Updates**
- Updated downloaders library from v1.1.150 to v1.1.154
- Updated ultimateutils library from v1.3.3 to v1.3.7
- Improved overall system stability and performance

**Code Quality Improvements**
- Refactored variable naming for better readability (e.g., `a` â†’ `anime`)
- Enhanced error handling with more descriptive logging
- Improved file validation and processing logic
- Added proper resource cleanup and memory management

## Technical Details

### Files Modified
- **Backend**: 6 Java files including handlers, models, and utilities
- **Frontend**: 11 JavaScript/CSS files covering widgets, frameworks, and styles
- **Configuration**: Updated Maven dependencies

### Performance Optimizations
- Reduced memory footprint through better resource management
- Improved WebSocket packet batching and transmission
- Enhanced UI responsiveness in grid layout mode
- Optimized file handling and compression processes

### Bug Fixes
- Fixed widget z-index conflicts causing interface issues
- Resolved layout problems affecting widget functionality
- Corrected proxy validation and assignment logic
- Fixed memory leaks in widget lifecycle management
- Addressed styling inconsistencies across different widgets

## Impact
These changes significantly improve the stability and usability of the MediaManager application, particularly in the web interface. The grid layout system now works reliably, and the enhanced download management provides better user feedback and system performance.